<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta
            name="viewport"
            content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>参与抽奖</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="./join.css">
</head>
<body>

<div class="join">
    <div class="join-image"></div>
    <div class="join-content" id="content">
        <div class="join-title">
            <span>南方的我</span>
            <span>十</span>
            <span>北方的你</span>
        </div>
        <input type="text"
               id="inputName"
               placeholder="请输入你的名字">
        <div class="to-join"
                id="toJoin">参与抽奖</div>
    </div>
</div>

</body>
<script>
    (function(){
        window.alert = function(name){
            var iframe = document.createElement("IFRAME");
            iframe.style.display="none";
            iframe.setAttribute("src", 'data:text/plain');
            document.documentElement.appendChild(iframe);
            window.frames[0].window.alert(name);
            iframe.parentNode.removeChild(iframe);
        }
    })();
    const url = 'http://120.26.131.106:8081/'
    // const url = 'http://localhost:8081/'
    $('#toJoin').click(()=>{
        let name = $('#inputName').val()
        if (name) {
            localStorage.setItem('get',name)
            $.post(`${url}lottery/create`,{name},(resp)=>{
                if (resp.insertedCount) {
                    alert('报名成功')
                } else {
                    alert('报名失败')
                }
            })
        } else {
            alert('请输入名字')
        }
    })
</script>
</html>
